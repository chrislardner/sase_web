@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@layer base {
    :root {
        --bg-page: rgb(250, 250, 250);
        --bg-nav: rgba(255, 255, 255, 0.90);
        --bg-footer: rgb(243, 244, 246);

        --fg: rgb(26, 26, 26);
        --fg-footer: rgb(31, 41, 55);

        --brand-500: rgb(37, 99, 235);
        --nav-blur: 8px;
        --nav-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
        --border-subtle: rgba(0, 0, 0, 0.08);

        --accent: rgb(128, 0, 0);
        --accent-contrast: rgb(255, 255, 255);

        --radius: 12px;

        --select-ring: rgba(37, 99, 235, .75);  /* blue-600 */
        --select-bg:   rgba(37, 99, 235, .10);

        --today-ring: rgba(0, 0, 0, .18);
        --today-bg:   rgba(0, 0, 0, .04);
    }
    .dark {
        --bg-page: rgb(14, 14, 14);
        --bg-nav: rgba(22, 22, 22, 0.80);
        --bg-footer: rgb(18, 18, 18);

        --fg: rgb(250, 250, 250);
        --fg-footer: rgb(229, 229, 229);

        --brand-500: rgb(59, 130, 246);
        --nav-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
        --border-subtle: rgba(255, 255, 255, 0.08);

        --accent: rgb(160, 30, 30);
        --accent-contrast: rgb(255, 255, 255);

        --select-ring: rgba(59, 130, 246, .85);
        --select-bg:   rgba(59, 130, 246, .18);

        --today-ring: rgba(255, 255, 255, .28);
        --today-bg:   rgba(255, 255, 255, .06);
    }

    body {
        background: var(--bg-page);
        color: var(--fg);
    }
}

@layer components {
    .page-shell { @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10; }
    .content-narrow { @apply max-w-3xl mx-auto; }
    .section { @apply mt-10; }

    .h1-title { @apply text-4xl font-bold tracking-tight; }
    .h2-title { @apply text-3xl font-bold tracking-tight mb-6; }
    .lead { @apply text-lg text-neutral-600 dark:text-neutral-300; }
    .link { @apply text-blue-600 hover:underline dark:text-blue-400; }

    .cta-row { @apply mt-6 flex flex-wrap items-center justify-center gap-3; }
    .btn { @apply inline-flex items-center justify-center rounded px-4 py-2 font-medium transition; }
    .btn-ghost { @apply text-blue-600 hover:underline dark:text-blue-400; }

    .btn-primary {
        @apply bg-blue-600 text-white hover:bg-blue-700
        focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-400;
    }

    .btn-icon {
        @apply inline-flex h-9 w-9 items-center justify-center rounded
        border text-sm font-medium
        border-neutral-300 bg-white text-neutral-700 hover:bg-neutral-50
        focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-400
        dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-700;
    }

    .btn-accent {
        background: var(--accent);
        color: var(--accent-contrast);
        transition: background-color .15s ease;
    }
    .btn-accent:hover { background: rgb(110, 0, 0); }
    .dark .btn-accent:hover { background: rgb(135, 20, 20); }
    .btn-accent:focus-visible {
        outline: 2px solid rgba(255, 255, 255, .6);
        outline-offset: 2px;
    }

    .grid-cards { @apply grid grid-cols-1 md:grid-cols-2 gap-6; }
    .card {
        @apply rounded-[var(--radius)] border shadow-sm transition hover:shadow-md
        bg-white dark:bg-neutral-900 dark:border-neutral-800;
    }
    .card-body { @apply p-5; }
    .card-title { @apply text-xl font-semibold mb-1; }
    .card-subtle { @apply text-neutral-600 dark:text-neutral-400; }
    .card-desc { @apply mt-2; }

    .hero-static { @apply mt-8 overflow-hidden rounded-2xl shadow; }

    .nav-root {
        @apply sticky top-0 z-50;
        background-color: var(--bg-nav);
        -webkit-backdrop-filter: blur(var(--nav-blur));
        backdrop-filter: blur(var(--nav-blur));
        transition: box-shadow .2s ease;
    }
    .nav-root.has-shadow { box-shadow: var(--nav-shadow); }

    .nav-inner { @apply mx-auto flex h-16 max-w-7xl items-center justify-between px-3 sm:px-4; }
    .nav-links { @apply hidden md:flex items-center gap-1; }

    .nav-link {
        @apply rounded px-3 py-2 text-sm font-medium transition
        text-neutral-700 hover:text-neutral-900
        dark:text-neutral-300 dark:hover:text-white;
        display: inline-block;
    }
    .nav-link--active {
        @apply text-blue-600 dark:text-blue-400;
        box-shadow: inset 0 -2px currentColor;
        border-radius: 0;
    }

    .nav-mobile-trigger {
        @apply inline-flex h-10 w-10 items-center justify-center rounded
        focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-400;
    }
    .nav-mobile-panel { @apply md:hidden; }
    .nav-mobile-list {
        @apply space-y-1 px-3 pb-3 pt-2 border-t
        border-neutral-200 dark:border-neutral-800;
    }
    .nav-mobile-link {
        @apply block rounded px-3 py-2 text-base font-medium transition
        text-neutral-700 hover:text-neutral-900
        dark:text-neutral-300 dark:hover:text-white;
    }
    .nav-mobile-link--active { @apply text-blue-600 dark:text-blue-400; }

    .footer-root {
        background: rgb(128, 0, 0);
        color: rgb(255, 255, 255);
        border-top: 1px solid rgba(255, 255, 255, .15);
        @apply py-6;
    }
    .footer-inner {
        @apply mx-auto max-w-7xl px-4 md:px-8 flex flex-col md:flex-row items-center justify-between gap-6;
    }
    .footer-links {
        @apply flex flex-col items-center space-y-3 md:flex-row md:space-x-6 md:space-y-0;
    }
    .footer-link { @apply transition hover:underline; }
    .footer-brand { @apply flex items-center gap-4; }
    .footer-icons { @apply flex items-center justify-center gap-4; }
    .footer-bottom { @apply mt-4; }
    .footer-bottom-inner {
        @apply mx-auto max-w-7xl px-4 md:px-8 py-3 flex items-center justify-between gap-3;
    }
    .footer-legal {
        @apply text-xs;
        color: rgba(255, 255, 255, 0.85);
    }

    .calendar-root {
        @apply rounded-[var(--radius)] border shadow-sm
        bg-white dark:bg-neutral-900 dark:border-neutral-800;
    }
    .calendar-head {
        @apply flex items-center justify-between px-3 py-2 border-b
        border-neutral-200 dark:border-neutral-800;
    }
    .calendar-title { @apply font-semibold; }
    .cal-btn {
        @apply inline-flex h-9 w-9 items-center justify-center rounded
        border border-neutral-300 text-neutral-700 bg-white hover:bg-neutral-50
        dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-700;
    }

    .calendar-grid {
        @apply grid grid-cols-7 gap-px p-2
        bg-neutral-200/80 dark:bg-neutral-800/70;
    }
    .cal-dow {
        @apply text-center text-xs font-medium py-2
        text-neutral-600 dark:text-neutral-400;
    }

    .cal-cell {
        @apply relative h-24 rounded bg-white dark:bg-neutral-900
        text-left p-2 transition;
        border: 1px solid rgba(0,0,0,0.04);
    }
    .dark .cal-cell { border-color: rgba(255,255,255,0.06); }
    .cal-cell:hover { background: rgba(0,0,0,0.02); }
    .dark .cal-cell:hover { background: rgba(255,255,255,0.03); }

    .cal-cell.is-out { @apply opacity-60; }

    .cal-cell.is-selected {
        box-shadow:
                inset 0 0 0 2px var(--select-ring),
                0 0 0 3px rgba(0, 0, 0, 0.04);
        background: var(--select-bg);
    }
    .dark .cal-cell.is-selected {
        box-shadow:
                inset 0 0 0 2px var(--select-ring),
                0 0 0 3px rgba(255, 255, 255, 0.06);
        background: var(--select-bg);
    }
    .cal-cell.is-selected .cal-num {
        font-weight: 700;
        color: var(--brand-500);
    }

    .cal-cell.is-today {
        box-shadow:
                inset 0 0 0 2px var(--today-ring),
                0 0 0 3px rgba(0, 0, 0, 0.03);
        background: var(--today-bg);
    }
    .dark .cal-cell.is-today {
        box-shadow:
                inset 0 0 0 2px var(--today-ring),
                0 0 0 3px rgba(255, 255, 255, 0.05);
        background: var(--today-bg);
    }
    .cal-cell.is-today .cal-num { font-weight: 600; }

    .cal-num { @apply text-sm; }

    .cal-dot {
        position: absolute; bottom: 8px; left: 10px;
        width: 10px; height: 10px; border-radius: 9999px;
        background: var(--accent);
    }

    .cal-badge {
        position: absolute; top: 6px; right: 6px;
        min-width: 1.25rem; height: 1.25rem; border-radius: 9999px;
        padding: 0 .25rem; font-size: .75rem; font-weight: 700;
        display: inline-flex; align-items: center; justify-content: center;
        background: var(--accent); color: var(--accent-contrast);
    }

    .cal-cell.has-events {
        background: rgba(128, 0, 0, 0.05);
        border-color: rgba(128, 0, 0, 0.18);
    }
    .dark .cal-cell.has-events {
        background: rgba(160, 30, 30, 0.10);
        border-color: rgba(160, 30, 30, 0.28);
    }

    .cal-cell.has-events:hover:not(.is-selected):not(.is-today) {
        background: rgba(128, 0, 0, 0.08);
        transform: translateY(-1px);
        box-shadow: 0 1px 0 rgba(0, 0, 0, .06);
    }
    .dark .cal-cell.has-events:hover:not(.is-selected):not(.is-today) {
        background: rgba(160, 30, 30, 0.16);
        box-shadow: 0 1px 0 rgba(0, 0, 0, .35);
    }

    .cal-cell.has-events:focus-visible:not(.is-selected):not(.is-today) {
        outline: none;
        box-shadow:
                inset 0 0 0 2px var(--accent),
                0 0 0 3px rgba(0, 0, 0, 0.06);
    }
    .dark .cal-cell.has-events:focus-visible:not(.is-selected):not(.is-today) {
        box-shadow:
                inset 0 0 0 2px var(--accent),
                0 0 0 3px rgba(255, 255, 255, 0.06);
    }

    .cal-cell.has-events .cal-dot {
        transform: scale(1);
        transition: transform 120ms ease;
        box-shadow: 0 0 0 2px rgba(255, 255, 255, .9);
    }
    .dark .cal-cell.has-events .cal-dot {
        box-shadow: 0 0 0 2px rgba(0, 0, 0, .6);
    }
    .cal-cell.has-events:hover .cal-dot {
        transform: scale(1.15);
    }

    .cal-cell.has-events .cal-badge {
        box-shadow: 0 1px 0 rgba(0, 0, 0, .08);
    }
    .dark .cal-cell.has-events .cal-badge {
        box-shadow: 0 1px 0 rgba(0, 0, 0, .40);
    }

    .cal-cell.has-events:not(.is-selected):not(.is-today) .cal-num {
        font-weight: 600;
    }
    .has-events .cal-num { @apply font-semibold; }
    .muted { @apply text-neutral-500 dark:text-neutral-400; }
    .meta { @apply flex items-start gap-2 text-neutral-700 dark:text-neutral-300; }
    .meta-icon { @apply mt-0.5 text-neutral-500 dark:text-neutral-400; }
    .prose-lite { @apply leading-relaxed; }

    .cal-chips{
        position:absolute; left:6px; right:6px; bottom:6px;
        display:flex; flex-wrap:wrap; gap:4px;
    }

    .cal-chip{
        --chip-bg: var(--accent);
        background: var(--chip-bg);
        color: #fff;
        height: 18px;
        padding: 0 6px;
        border-radius: 9999px;
        font-size: 11px;
        line-height: 18px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100%;
    }

    .cal-chip--more{
        background: rgba(0,0,0,.28);
        color: #fff;
    }
    .dark .cal-chip--more{
        background: rgba(255,255,255,.28);
        color: #fff;
    }

    .ev-skip{
        @apply inline-flex items-center justify-center h-8 w-8 rounded border text-sm
        border-neutral-300 text-neutral-700 bg-white hover:bg-neutral-50
        dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-700;
    }

    @media (max-width: 640px) {
        .cal-cell { height: 4.75rem; padding: .4rem .45rem; }
        .cal-num { font-size: .9rem; }

        .cal-chips { left: 8px; right: 8px; bottom: 6px; gap: 6px; }
        .cal-chip {
            width: 10px; height: 10px;
            padding: 0; border-radius: 9999px;
            font-size: 0; line-height: 0;
        }
        .cal-chip--more { display: none; }
        .cal-badge { display: none; }
    }
}
